<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SamaruC Code - Test Monaco</title>
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #1e1e1e;
            color: #ffffff;
        }
        #container {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        #monaco-editor {
            flex: 1;
            min-height: 0;
        }
        #status {
            background: #2d2d30;
            padding: 10px;
            border-bottom: 1px solid #3e3e42;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="status">üîÑ Cargando Monaco Editor...</div>
        <div id="monaco-editor"></div>
    </div>

    <script>
        function updateStatus(message, color = '#ffffff') {
            const status = document.getElementById('status');
            status.textContent = message;
            status.style.color = color;
        }

        function loadMonaco() {
            console.log('üîÑ Iniciando carga de Monaco...');
            updateStatus('üîÑ Cargando Monaco Editor...', '#ffa500');
            
            const basePath = window.location.href.replace('/test-monaco.html', '');
            console.log('üìÇ Base path:', basePath);
            
            // Cargar CSS
            const css = document.createElement('link');
            css.rel = 'stylesheet';
            css.href = basePath + '/monaco/vs/editor/editor.main.css';
            css.onload = () => {
                console.log('‚úÖ CSS cargado');
                loadScript(basePath);
            };
            css.onerror = (error) => {
                console.error('‚ùå Error CSS:', error);
                updateStatus('‚ùå Error cargando CSS de Monaco', '#ff4444');
            };
            document.head.appendChild(css);
        }

        function loadScript(basePath) {
            console.log('üìù Cargando loader...');
            const loader = document.createElement('script');
            loader.src = basePath + '/monaco/vs/loader.js';
            loader.onload = () => {
                console.log('‚úÖ Loader cargado');
                configureMonaco(basePath);
            };
            loader.onerror = (error) => {
                console.error('‚ùå Error loader:', error);
                updateStatus('‚ùå Error cargando loader de Monaco', '#ff4444');
            };
            document.head.appendChild(loader);
        }

        function configureMonaco(basePath) {
            console.log('‚öôÔ∏è Configurando...');
            updateStatus('‚öôÔ∏è Configurando Monaco...', '#2196F3');
            
            if (typeof require === 'undefined') {
                console.error('‚ùå require no disponible');
                updateStatus('‚ùå require no disponible', '#ff4444');
                return;
            }
            
            require.config({ paths: { 'vs': basePath + '/monaco/vs' } });
            window.MonacoEnvironment = {
                getWorkerUrl: () => basePath + '/monaco/vs/base/worker/workerMain.js'
            };
            
            console.log('üîß Cargando editor...');
            require(['vs/editor/editor.main'], 
                () => {
                    console.log('‚úÖ Monaco cargado');
                    createEditor();
                },
                (error) => {
                    console.error('‚ùå Error cargando:', error);
                    updateStatus('‚ùå Error cargando Monaco', '#ff4444');
                }
            );
        }

        function createEditor() {
            console.log('üé® Creando editor...');
            updateStatus('üé® Creando editor...', '#2196F3');
            
            try {
                const container = document.getElementById('monaco-editor');
                
                const editor = window.monaco.editor.create(container, {
                    value: '#include <stdio.h>\n\nint main() {\n    printf("¬°Monaco funcionando!\\n");\n    return 0;\n}',
                    language: 'c',
                    theme: 'vs-dark',
                    fontSize: 14,
                    automaticLayout: true
                });
                
                console.log('üéâ Editor creado');
                updateStatus('‚úÖ Monaco Editor funcionando correctamente', '#4caf50');
                
            } catch (error) {
                console.error('‚ùå Error creando editor:', error);
                updateStatus('‚ùå Error creando editor: ' + error.message, '#ff4444');
            }
        }

        // Iniciar cuando cargue la p√°gina
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(loadMonaco, 100);
        });
    </script>
</body>
</html>
